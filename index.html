<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Conversor de Imagens para PDF</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f7f9fc;
        color: #333;
        text-align: center;
        padding: 20px;
    }
    h1 {
        color: #444;
    }
    .upload-area {
        display: block; /* Ocupa linha inteira */
        width: 100%;
        max-width: 500px;
        border: 2px dashed #888;
        border-radius: 10px;
        padding: 40px;
        background: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 20px auto;
        box-sizing: border-box;
    }
    .upload-area:hover {
        background: #eef;
        border-color: #4a90e2;
    }
    input[type=file] {
        display: none;
    }
    button {
        display: block; /* Garante que fique embaixo */
        margin: 20px auto 0 auto;
        background: #4a90e2;
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
        transition: background 0.3s ease;
    }
    button:hover {
        background: #357abd;
    }
    footer {
        margin-top: 30px;
        font-size: 14px;
        color: #777;
    }
</style>
</head>
<body>

<h1>Conversor de Imagens para PDF</h1>
<p>Envie PNG, JPG ou WEBP e baixe como PDF</p>

<label class="upload-area" for="fileInput">
    Clique ou arraste imagens aqui
    <br><small>(PNG, JPG, WEBP – múltiplos arquivos)</small>
</label>
<input type="file" id="fileInput" accept="image/png, image/jpeg, image/webp" multiple>

<button id="convertBtn">Converter para PDF</button>

<footer>
    Feito com ❤️ – Funciona 100% offline
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const fileInput = document.getElementById('fileInput');
const convertBtn = document.getElementById('convertBtn');

convertBtn.addEventListener('click', async () => {
    const files = Array.from(fileInput.files);
    if (files.length === 0) {
        alert('Selecione pelo menos uma imagem.');
        return;
    }

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();

    for (let i = 0; i < files.length; i++) {
        const imgData = await readFileAsDataURL(files[i]);
        const img = await loadImage(imgData);

        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        let imgWidth = pageWidth;
        let imgHeight = (img.height * imgWidth) / img.width;

        if (imgHeight > pageHeight) {
            imgHeight = pageHeight;
            imgWidth = (img.width * imgHeight) / img.height;
        }

        if (i > 0) pdf.addPage();
        pdf.addImage(img, imgData.includes('png') ? 'PNG' : 'JPEG', 
                     (pageWidth - imgWidth) / 2, 
                     (pageHeight - imgHeight) / 2,
                     imgWidth, imgHeight);
    }

    pdf.save('imagens.pdf');
});

function readFileAsDataURL(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = e => resolve(e.target.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
    });
}

function loadImage(src) {
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => resolve(img);
        img.onerror = reject;
        img.src = src;
    });
}
</script>

</body>
</html>
